Title: å¦‚ä½•æ¸…ç©ºDiscourseè®ºå›é‡Œçš„æ ‡ç­¾

æœ€è¿‘ç”¨Discourseæ­å»ºäº†ä¸€ä¸ªæ–°è¥¿å…°åäººç¤¾åŒºï¼š

    http://nz4cn.com

è¿™ä¸ªç³»ç»Ÿé‡Œï¼Œæœ‰åˆ†ç±»(category)å’Œæ ‡ç­¾(tag)ä¸¤ä¸ªæ¦‚å¿µã€‚
åœ¨é…ç½®çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ·»åŠ äº†ä¸€äº›æ ‡ç­¾ç»„ï¼Œæ¯ä¸ªç»„ä¸‹æ–°å»ºäº†å¾ˆå¤šæ ‡ç­¾ã€‚
ä¾‹å¦‚ä¸€ä¸ªæ ‡ç­¾ç»„å«æœ‰æ–°è¥¿å…°æ‰€æœ‰åŸå¸‚ï¼Œæ‰“ç®—ç”¨æ¥ç»™å¸–å­æ ‡è®°åœ°ç†ä½ç½®ã€‚
ä½†åæ¥æˆ‘æ”¹å˜äº†æ€è·¯ï¼Œè¿™äº›æ ‡ç­¾å°±æ²¡æœ‰äº†ç”¨å¤„ï¼Œäºæ˜¯æˆ‘åˆ é™¤äº†æ ‡ç­¾ç»„ã€‚
ä½†æ˜¯æˆ‘å¾ˆå¿«å‘ç°ï¼Œå½“æˆ‘æ–°å»ºå¸–å­çš„æ—¶å€™ï¼Œæ ‡ç­¾çš„ä¸‹æ‹‰åˆ—è¡¨é‡Œè¿˜æ˜¯å‡ºç°äº†æˆ‘æ›¾ç»åˆ›å»ºè¿‡çš„æ‰€æœ‰æ ‡ç­¾ã€‚
åˆ—è¡¨éå¸¸é•¿ï¼Œä¸¥é‡å½±å“äº†æˆ‘ç»™å¸–å­æ·»åŠ æ ‡ç­¾ï¼Œä¹Ÿå¼•æ¥ç”¨æˆ·çš„ä¸æ»¡ã€‚

è¦åˆ é™¤ä¸€ä¸ªä½¿ç”¨è¿‡çš„æ ‡ç­¾ï¼Œåªéœ€ç‚¹å‡»è¯¥æ ‡ç­¾ï¼Œè¿›å…¥å¸–å­åˆ—è¡¨ã€‚
åœ¨é¡¶éƒ¨å°±æœ‰åˆ é™¤æ ‡ç­¾çš„æŒ‰é’®ï¼Œæ¯”è¾ƒç®€å•ã€‚
ä½†æ˜¯ï¼Œå¯¹äºæ²¡æœ‰ä½¿ç”¨è¿‡çš„æ ‡ç­¾å‘¢ï¼Ÿç”±äºæ²¡æœ‰å…¥å£ï¼Œæ²¡æ³•åˆ é™¤ã€‚
é™¤éä¸€ä¸ªä¸€ä¸ªè‡ªå·±è¾“å…¥åˆ°urlé‡Œï¼Œä½†è¿™æ ·å¤ªè¾›è‹¦äº†ã€‚

èƒ½å¦ç›´æ¥è¿›å…¥Discourseçš„æ•°æ®åº“ï¼Œå°†æ ‡ç­¾åˆ é™¤å‘¢ï¼Ÿå°è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°å¯ä»¥ã€‚

é¦–å…ˆä½ éœ€è¦è¿›å…¥dockerå®¹å™¨ï¼š

    cd /var/discourse/
    ./launcher enter app  # in docker now

æ¥ä¸‹æ¥è¦è¿›å…¥å®¹å™¨é‡Œçš„æ•°æ®åº“ï¼š

    sudo su - postgres  # switch to postgres user
    psql discourse  # in db now!

åˆ—å‡ºæ‰€æœ‰tagç›¸å…³çš„è¡¨ï¼š

    \dt *tag*;  # show all tables with tag in name

å¾—åˆ°ç»“æœï¼š

     Schema |         Name          | Type  |   Owner
    --------+-----------------------+-------+-----------
     public | category_tag_groups   | table | discourse
     public | category_tags         | table | discourse
     public | instagram_user_infos  | table | discourse
     public | tag_group_memberships | table | discourse
     public | tag_groups            | table | discourse
     public | tag_users             | table | discourse
     public | tags                  | table | discourse
     public | topic_tags            | table | discourse
    (8 rows)

è¿™é‡ŒçœŸæ­£ç›¸å…³çš„æ˜¯`tags`å’Œ`topic_tags`ä¸¤å¼ è¡¨ã€‚
ç”±äºæˆ‘çš„è®ºå›è¿˜æ˜¯æ–°å»ºï¼Œæ•°æ®ä¸å¤šï¼Œæ‰€ä»¥æˆ‘å†³å®šç›´æ¥æ¸…ç©ºæ‰€æœ‰çš„æ ‡ç­¾ï¼Œç„¶åé€šè¿‡ç®¡ç†å‘˜å¸å·é‡æ–°æ‰“æ ‡ç­¾ã€‚
æ³¨æ„åˆ é™¤çš„å…ˆåé¡ºåºï¼š

    delete from topic_tags;
    delete from tags;

å¥½äº†ï¼Œå›åˆ°ç½‘ç«™ï¼Œå‘æ–°ä¸»é¢˜ï¼Œæ¼äººçš„æ ‡ç­¾åˆ—è¡¨ç»ˆäºæ¶ˆå¤±äº†ğŸ˜Š

